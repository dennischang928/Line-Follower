{"ast":null,"code":"\"use strict\";\n\n// notes:\n// done doesnt seem to ever be true?\n// want to be able to specify pipelines of decoders\n// ie linedecoder or just standard decoder\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __await = this && this.__await || function (v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n};\nvar __asyncGenerator = this && this.__asyncGenerator || function (thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n    i,\n    q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserSerial = void 0;\nvar defaultSerialOptions = {\n  baudRate: 115200,\n  dataBits: 8,\n  stopBits: 1,\n  parity: \"none\",\n  bufferSize: 255,\n  flowControl: \"none\"\n};\nvar defaultSerialFilters = {};\nvar BrowserSerial = /** @class */function () {\n  function BrowserSerial(serialOptions, serialFilters) {\n    this.serialOptions = __assign(__assign({}, defaultSerialOptions), serialOptions);\n    this.serialFilters = __assign(__assign({}, defaultSerialFilters), serialFilters);\n    this.EOF = \"\\n\";\n    this.port = null;\n    this.encoder = new TextEncoderStream();\n    this.decoder = new TextDecoderStream(\"utf-8\");\n    this.lineTransformer = new TransformStream(new LineBreakTransformer());\n    // port reads from encoder.readable, i write to encoder.writable\n    this.writeToStream = this.encoder.writable;\n    // port writes to decoder.writable, i read from decoder.readable\n    this.readTransformers = [this.decoder];\n    this.readFromStream = this.decoder.readable;\n    if (this.EOF === \"\\n\") {\n      this.readTransformers.push(this.lineTransformer);\n      this.readFromStream = this.lineTransformer.readable;\n    }\n    this.reader = null;\n  }\n  BrowserSerial.prototype.connect = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, _b, pipeReducer;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _a = this;\n            if (!this.serialFilters) return [3 /*break*/, 2];\n            return [4 /*yield*/, navigator.serial.requestPort(this.serialFilters)];\n          case 1:\n            _b = _c.sent();\n            return [3 /*break*/, 4];\n          case 2:\n            return [4 /*yield*/, navigator.serial.requestPort()];\n          case 3:\n            _b = _c.sent();\n            _c.label = 4;\n          case 4:\n            _a.port = _b;\n            return [4 /*yield*/, this.port.open(this.serialOptions)];\n          case 5:\n            _c.sent();\n            pipeReducer = function (accumulator, currentValue) {\n              return accumulator.pipeThrough(currentValue);\n            };\n            this.readTransformers.reduce(pipeReducer, this.port.readable); //.pipeTo(writable)\n            this.encoder.readable.pipeTo(this.port.writable);\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  BrowserSerial.prototype.disconnect = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this.reader) return [3 /*break*/, 2];\n            // cancel the reader\n            return [4 /*yield*/, this.reader.cancel()];\n          case 1:\n            // cancel the reader\n            _a.sent();\n            //   await this.inDone.catch(() => {});\n            this.reader = null;\n            _a.label = 2;\n          case 2:\n            if (!this.writeToStream) return [3 /*break*/, 4];\n            // cancel the writer\n            return [4 /*yield*/, this.writeToStream.getWriter().close()];\n          case 3:\n            // cancel the writer\n            _a.sent();\n            //   await this.outDone;\n            this.writeToStream = null;\n            _a.label = 4;\n          case 4:\n            // close the port\n            return [4 /*yield*/, this.port.close()];\n          case 5:\n            // close the port\n            _a.sent();\n            this.port = null;\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  BrowserSerial.prototype.write = function (cmd) {\n    return __awaiter(this, void 0, void 0, function () {\n      var writer;\n      return __generator(this, function (_a) {\n        writer = this.writeToStream.getWriter();\n        // write command and unlock\n        writer.write(cmd + this.EOF);\n        writer.releaseLock();\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  BrowserSerial.prototype.readLoop = function (callable) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, done, value, e_1;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.port.readable) return [3 /*break*/, 8];\n            // lock the reader to the port stream loop\n            this.reader = this.readFromStream.getReader();\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 5, 6, 7]);\n            _b.label = 2;\n          case 2:\n            if (!true) return [3 /*break*/, 4];\n            return [4 /*yield*/, this.reader.read()];\n          case 3:\n            _a = _b.sent(), done = _a.done, value = _a.value;\n            // if no more values, break\n            // FYI done seems to always return false...\n            done = callable(value, done);\n            console.log(done);\n            if (done === true) {\n              console.log(\"breaking\");\n              return [3 /*break*/, 4];\n            }\n            return [3 /*break*/, 2];\n          case 4:\n            return [3 /*break*/, 7];\n          case 5:\n            e_1 = _b.sent();\n            console.log(\"ERROR, \", e_1);\n            return [3 /*break*/, 7];\n          case 6:\n            console.log(\"unlocking reader\");\n            console.log(\"before unlock\");\n            this.reader.releaseLock();\n            console.log(\"after unlock\");\n            this.reader = null;\n            console.log(this.reader);\n            return [7 /*endfinally*/];\n          case 7:\n            return [3 /*break*/, 0];\n          case 8:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  // assumes that the stream reads line by line\n  BrowserSerial.prototype.readUntilLine = function (until, reader, callable) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, done, value, e_2;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _b.trys.push([0, 4, 5, 6]);\n            _b.label = 1;\n          case 1:\n            if (!true) return [3 /*break*/, 3];\n            return [4 /*yield*/, reader.read()];\n          case 2:\n            _a = _b.sent(), done = _a.done, value = _a.value;\n            // if no more values, break\n            // FYI done seems to always return false...\n            callable(value, done);\n            if (value === until) {\n              console.log(\"breaking\");\n              return [3 /*break*/, 3];\n            }\n            return [3 /*break*/, 1];\n          case 3:\n            return [3 /*break*/, 6];\n          case 4:\n            e_2 = _b.sent();\n            console.log(\"ERROR, \", e_2);\n            return [3 /*break*/, 6];\n          case 5:\n            reader.releaseLock();\n            return [7 /*endfinally*/];\n          case 6:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  // assumes that the stream reads line by line\n  BrowserSerial.prototype.readUntil = function (until, callable) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, done, value, e_3;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.port.readable) return [3 /*break*/, 8];\n            this.reader = this.readFromStream.getReader();\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 5, 6, 7]);\n            _b.label = 2;\n          case 2:\n            if (!true) return [3 /*break*/, 4];\n            return [4 /*yield*/, this.reader.read()];\n          case 3:\n            _a = _b.sent(), done = _a.done, value = _a.value;\n            // if no more values, break\n            // FYI done seems to always return false...\n            callable(value, done);\n            if (value === until) {\n              console.log(\"breaking\");\n              return [3 /*break*/, 4];\n            }\n            return [3 /*break*/, 2];\n          case 4:\n            return [3 /*break*/, 7];\n          case 5:\n            e_3 = _b.sent();\n            console.log(\"ERROR, \", e_3);\n            return [3 /*break*/, 7];\n          case 6:\n            console.log(\"unlocking reader\");\n            console.log(\"before unlock\");\n            this.reader.releaseLock();\n            console.log(\"after unlock\");\n            this.reader = null;\n            console.log(this.reader);\n            return [7 /*endfinally*/];\n          case 7:\n            return [3 /*break*/, 0];\n          case 8:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  BrowserSerial.prototype.readAllChunks = function (readableStream) {\n    var reader = readableStream.getReader();\n    var chunks = \"\";\n    return pump();\n    function pump() {\n      return __awaiter(this, void 0, void 0, function () {\n        var _a, value, done;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              return [4 /*yield*/, reader.read()];\n            case 1:\n              _a = _b.sent(), value = _a.value, done = _a.done;\n              if (done) {\n                return [2 /*return*/, chunks];\n              }\n              chunks += value;\n              return [2 /*return*/, pump()];\n          }\n        });\n      });\n    }\n  };\n  BrowserSerial.prototype.readGenerator = function () {\n    return __asyncGenerator(this, arguments, function readGenerator_1() {\n      var _a, value, done, e_4;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.port.readable) return [3 /*break*/, 10];\n            this.reader = this.readFromStream.getReader();\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 7, 8, 9]);\n            _b.label = 2;\n          case 2:\n            if (!true) return [3 /*break*/, 6];\n            return [4 /*yield*/, __await(this.reader.read())];\n          case 3:\n            _a = _b.sent(), value = _a.value, done = _a.done;\n            return [4 /*yield*/, __await({\n              value: value,\n              done: done\n            })];\n          case 4:\n            return [4 /*yield*/, _b.sent()];\n          case 5:\n            _b.sent();\n            if (done === true) {\n              console.log(\"breaking!\");\n              return [3 /*break*/, 6];\n            }\n            return [3 /*break*/, 2];\n          case 6:\n            return [3 /*break*/, 9];\n          case 7:\n            e_4 = _b.sent();\n            console.log(\"ERROR, \", e_4);\n            return [3 /*break*/, 9];\n          case 8:\n            console.log(\"unlocking reader\");\n            this.reader.releaseLock();\n            return [7 /*endfinally*/];\n          case 9:\n            return [3 /*break*/, 0];\n          case 10:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  BrowserSerial.prototype.getReader = function () {\n    if (this.port.readable) {\n      return this.readFromStream.getReader();\n    }\n  };\n  // test out the generator\n  BrowserSerial.prototype.readLineGenerator = function () {\n    return __asyncGenerator(this, arguments, function readLineGenerator_1() {\n      var _a, value, done, e_5;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.port.readable) return [3 /*break*/, 10];\n            this.reader = this.readFromStream.getReader();\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 7, 8, 9]);\n            _b.label = 2;\n          case 2:\n            if (!true) return [3 /*break*/, 6];\n            return [4 /*yield*/, __await(this.reader.read())];\n          case 3:\n            _a = _b.sent(), value = _a.value, done = _a.done;\n            return [4 /*yield*/, __await({\n              value: value,\n              done: done\n            })];\n          case 4:\n            return [4 /*yield*/, _b.sent()];\n          case 5:\n            _b.sent();\n            if (done === true) {\n              console.log(\"breaking!\");\n              return [3 /*break*/, 6];\n            }\n            return [3 /*break*/, 2];\n          case 6:\n            return [3 /*break*/, 9];\n          case 7:\n            e_5 = _b.sent();\n            console.log(\"ERROR, \", e_5);\n            return [3 /*break*/, 9];\n          case 8:\n            console.log(\"unlocking reader\");\n            this.reader.releaseLock();\n            return [7 /*endfinally*/];\n          case 9:\n            return [3 /*break*/, 0];\n          case 10:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  return BrowserSerial;\n}();\nexports.BrowserSerial = BrowserSerial;\nvar LineBreakTransformer = /** @class */function () {\n  function LineBreakTransformer() {\n    this.container = \"\";\n  }\n  LineBreakTransformer.prototype.transform = function (chunk, controller) {\n    this.container += chunk;\n    var lines = this.container.split(\"\\r\\n\");\n    var pop = lines.pop();\n    this.container = \"\";\n    if (pop) {\n      this.container = pop;\n    }\n    lines.forEach(function (line) {\n      return controller.enqueue(line);\n    });\n  };\n  LineBreakTransformer.prototype.flush = function (controller) {\n    controller.enqueue(this.container);\n  };\n  return LineBreakTransformer;\n}();","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__await","__asyncGenerator","asyncIterator","q","a","b","resume","settle","r","fulfill","shift","defineProperty","exports","BrowserSerial","defaultSerialOptions","baudRate","dataBits","stopBits","parity","bufferSize","flowControl","defaultSerialFilters","serialOptions","serialFilters","EOF","port","encoder","TextEncoderStream","decoder","TextDecoderStream","lineTransformer","TransformStream","LineBreakTransformer","writeToStream","writable","readTransformers","readFromStream","readable","reader","connect","_a","_b","pipeReducer","_c","navigator","serial","requestPort","open","accumulator","currentValue","pipeThrough","reduce","pipeTo","disconnect","cancel","getWriter","close","write","cmd","writer","releaseLock","readLoop","callable","e_1","getReader","read","console","log","readUntilLine","until","e_2","readUntil","e_3","readAllChunks","readableStream","chunks","pump","readGenerator","readGenerator_1","e_4","readLineGenerator","readLineGenerator_1","e_5","container","transform","chunk","controller","lines","split","forEach","line","enqueue","flush"],"sources":["/Users/dennischang/My Drive/Engineering/Projects/Line_Follower/Software/UserInterface/robot-sumo-dashboard/node_modules/browser-serial/dist/BrowserSerial.js"],"sourcesContent":["\"use strict\";\n// notes:\n// done doesnt seem to ever be true?\n// want to be able to specify pipelines of decoders\n// ie linedecoder or just standard decoder\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserSerial = void 0;\nvar defaultSerialOptions = {\n    baudRate: 115200,\n    dataBits: 8,\n    stopBits: 1,\n    parity: \"none\",\n    bufferSize: 255,\n    flowControl: \"none\",\n};\nvar defaultSerialFilters = {};\nvar BrowserSerial = /** @class */ (function () {\n    function BrowserSerial(serialOptions, serialFilters) {\n        this.serialOptions = __assign(__assign({}, defaultSerialOptions), serialOptions);\n        this.serialFilters = __assign(__assign({}, defaultSerialFilters), serialFilters);\n        this.EOF = \"\\n\";\n        this.port = null;\n        this.encoder = new TextEncoderStream();\n        this.decoder = new TextDecoderStream(\"utf-8\");\n        this.lineTransformer = new TransformStream(new LineBreakTransformer());\n        // port reads from encoder.readable, i write to encoder.writable\n        this.writeToStream = this.encoder.writable;\n        // port writes to decoder.writable, i read from decoder.readable\n        this.readTransformers = [this.decoder];\n        this.readFromStream = this.decoder.readable;\n        if (this.EOF === \"\\n\") {\n            this.readTransformers.push(this.lineTransformer);\n            this.readFromStream = this.lineTransformer.readable;\n        }\n        this.reader = null;\n    }\n    BrowserSerial.prototype.connect = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, _b, pipeReducer;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this;\n                        if (!this.serialFilters) return [3 /*break*/, 2];\n                        return [4 /*yield*/, navigator.serial.requestPort(this.serialFilters)];\n                    case 1:\n                        _b = _c.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, navigator.serial.requestPort()];\n                    case 3:\n                        _b = _c.sent();\n                        _c.label = 4;\n                    case 4:\n                        _a.port = _b;\n                        return [4 /*yield*/, this.port.open(this.serialOptions)];\n                    case 5:\n                        _c.sent();\n                        pipeReducer = function (accumulator, currentValue) { return accumulator.pipeThrough(currentValue); };\n                        this.readTransformers.reduce(pipeReducer, this.port.readable); //.pipeTo(writable)\n                        this.encoder.readable.pipeTo(this.port.writable);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserSerial.prototype.disconnect = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.reader) return [3 /*break*/, 2];\n                        // cancel the reader\n                        return [4 /*yield*/, this.reader.cancel()];\n                    case 1:\n                        // cancel the reader\n                        _a.sent();\n                        //   await this.inDone.catch(() => {});\n                        this.reader = null;\n                        _a.label = 2;\n                    case 2:\n                        if (!this.writeToStream) return [3 /*break*/, 4];\n                        // cancel the writer\n                        return [4 /*yield*/, this.writeToStream.getWriter().close()];\n                    case 3:\n                        // cancel the writer\n                        _a.sent();\n                        //   await this.outDone;\n                        this.writeToStream = null;\n                        _a.label = 4;\n                    case 4: \n                    // close the port\n                    return [4 /*yield*/, this.port.close()];\n                    case 5:\n                        // close the port\n                        _a.sent();\n                        this.port = null;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserSerial.prototype.write = function (cmd) {\n        return __awaiter(this, void 0, void 0, function () {\n            var writer;\n            return __generator(this, function (_a) {\n                writer = this.writeToStream.getWriter();\n                // write command and unlock\n                writer.write(cmd + this.EOF);\n                writer.releaseLock();\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserSerial.prototype.readLoop = function (callable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, done, value, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.port.readable) return [3 /*break*/, 8];\n                        // lock the reader to the port stream loop\n                        this.reader = this.readFromStream.getReader();\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 5, 6, 7]);\n                        _b.label = 2;\n                    case 2:\n                        if (!true) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.reader.read()];\n                    case 3:\n                        _a = _b.sent(), done = _a.done, value = _a.value;\n                        // if no more values, break\n                        // FYI done seems to always return false...\n                        done = callable(value, done);\n                        console.log(done);\n                        if (done === true) {\n                            console.log(\"breaking\");\n                            return [3 /*break*/, 4];\n                        }\n                        return [3 /*break*/, 2];\n                    case 4: return [3 /*break*/, 7];\n                    case 5:\n                        e_1 = _b.sent();\n                        console.log(\"ERROR, \", e_1);\n                        return [3 /*break*/, 7];\n                    case 6:\n                        console.log(\"unlocking reader\");\n                        console.log(\"before unlock\");\n                        this.reader.releaseLock();\n                        console.log(\"after unlock\");\n                        this.reader = null;\n                        console.log(this.reader);\n                        return [7 /*endfinally*/];\n                    case 7: return [3 /*break*/, 0];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // assumes that the stream reads line by line\n    BrowserSerial.prototype.readUntilLine = function (until, reader, callable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, done, value, e_2;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 4, 5, 6]);\n                        _b.label = 1;\n                    case 1:\n                        if (!true) return [3 /*break*/, 3];\n                        return [4 /*yield*/, reader.read()];\n                    case 2:\n                        _a = _b.sent(), done = _a.done, value = _a.value;\n                        // if no more values, break\n                        // FYI done seems to always return false...\n                        callable(value, done);\n                        if (value === until) {\n                            console.log(\"breaking\");\n                            return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 1];\n                    case 3: return [3 /*break*/, 6];\n                    case 4:\n                        e_2 = _b.sent();\n                        console.log(\"ERROR, \", e_2);\n                        return [3 /*break*/, 6];\n                    case 5:\n                        reader.releaseLock();\n                        return [7 /*endfinally*/];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // assumes that the stream reads line by line\n    BrowserSerial.prototype.readUntil = function (until, callable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, done, value, e_3;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.port.readable) return [3 /*break*/, 8];\n                        this.reader = this.readFromStream.getReader();\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 5, 6, 7]);\n                        _b.label = 2;\n                    case 2:\n                        if (!true) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.reader.read()];\n                    case 3:\n                        _a = _b.sent(), done = _a.done, value = _a.value;\n                        // if no more values, break\n                        // FYI done seems to always return false...\n                        callable(value, done);\n                        if (value === until) {\n                            console.log(\"breaking\");\n                            return [3 /*break*/, 4];\n                        }\n                        return [3 /*break*/, 2];\n                    case 4: return [3 /*break*/, 7];\n                    case 5:\n                        e_3 = _b.sent();\n                        console.log(\"ERROR, \", e_3);\n                        return [3 /*break*/, 7];\n                    case 6:\n                        console.log(\"unlocking reader\");\n                        console.log(\"before unlock\");\n                        this.reader.releaseLock();\n                        console.log(\"after unlock\");\n                        this.reader = null;\n                        console.log(this.reader);\n                        return [7 /*endfinally*/];\n                    case 7: return [3 /*break*/, 0];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserSerial.prototype.readAllChunks = function (readableStream) {\n        var reader = readableStream.getReader();\n        var chunks = \"\";\n        return pump();\n        function pump() {\n            return __awaiter(this, void 0, void 0, function () {\n                var _a, value, done;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, reader.read()];\n                        case 1:\n                            _a = _b.sent(), value = _a.value, done = _a.done;\n                            if (done) {\n                                return [2 /*return*/, chunks];\n                            }\n                            chunks += value;\n                            return [2 /*return*/, pump()];\n                    }\n                });\n            });\n        }\n    };\n    BrowserSerial.prototype.readGenerator = function () {\n        return __asyncGenerator(this, arguments, function readGenerator_1() {\n            var _a, value, done, e_4;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.port.readable) return [3 /*break*/, 10];\n                        this.reader = this.readFromStream.getReader();\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 7, 8, 9]);\n                        _b.label = 2;\n                    case 2:\n                        if (!true) return [3 /*break*/, 6];\n                        return [4 /*yield*/, __await(this.reader.read())];\n                    case 3:\n                        _a = _b.sent(), value = _a.value, done = _a.done;\n                        return [4 /*yield*/, __await({ value: value, done: done })];\n                    case 4: return [4 /*yield*/, _b.sent()];\n                    case 5:\n                        _b.sent();\n                        if (done === true) {\n                            console.log(\"breaking!\");\n                            return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 2];\n                    case 6: return [3 /*break*/, 9];\n                    case 7:\n                        e_4 = _b.sent();\n                        console.log(\"ERROR, \", e_4);\n                        return [3 /*break*/, 9];\n                    case 8:\n                        console.log(\"unlocking reader\");\n                        this.reader.releaseLock();\n                        return [7 /*endfinally*/];\n                    case 9: return [3 /*break*/, 0];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserSerial.prototype.getReader = function () {\n        if (this.port.readable) {\n            return this.readFromStream.getReader();\n        }\n    };\n    // test out the generator\n    BrowserSerial.prototype.readLineGenerator = function () {\n        return __asyncGenerator(this, arguments, function readLineGenerator_1() {\n            var _a, value, done, e_5;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.port.readable) return [3 /*break*/, 10];\n                        this.reader = this.readFromStream.getReader();\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 7, 8, 9]);\n                        _b.label = 2;\n                    case 2:\n                        if (!true) return [3 /*break*/, 6];\n                        return [4 /*yield*/, __await(this.reader.read())];\n                    case 3:\n                        _a = _b.sent(), value = _a.value, done = _a.done;\n                        return [4 /*yield*/, __await({ value: value, done: done })];\n                    case 4: return [4 /*yield*/, _b.sent()];\n                    case 5:\n                        _b.sent();\n                        if (done === true) {\n                            console.log(\"breaking!\");\n                            return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 2];\n                    case 6: return [3 /*break*/, 9];\n                    case 7:\n                        e_5 = _b.sent();\n                        console.log(\"ERROR, \", e_5);\n                        return [3 /*break*/, 9];\n                    case 8:\n                        console.log(\"unlocking reader\");\n                        this.reader.releaseLock();\n                        return [7 /*endfinally*/];\n                    case 9: return [3 /*break*/, 0];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BrowserSerial;\n}());\nexports.BrowserSerial = BrowserSerial;\nvar LineBreakTransformer = /** @class */ (function () {\n    function LineBreakTransformer() {\n        this.container = \"\";\n    }\n    LineBreakTransformer.prototype.transform = function (chunk, controller) {\n        this.container += chunk;\n        var lines = this.container.split(\"\\r\\n\");\n        var pop = lines.pop();\n        this.container = \"\";\n        if (pop) {\n            this.container = pop;\n        }\n        lines.forEach(function (line) { return controller.enqueue(line); });\n    };\n    LineBreakTransformer.prototype.flush = function (controller) {\n        controller.enqueue(this.container);\n    };\n    return LineBreakTransformer;\n}());\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}